<html>
    <head>
        
    </head>
    <body>
        asd
        <hr>
        <h1>
            h1
        </h1>
        <hr>
        <textarea name="" id="textarea01" cols="30" rows="10"></textarea>
        <button id="button01">hey</button>
        <div id="result"></div>
        <table width="50%">
            <tbody id="table01">
                <tr>
                    <td>日期</td>
                    <td>單位</td>
                    <td>人員</td>
                    <td>案類</td>
                    <td>受獎者</td>
                    <td>yeah!</td>
                </tr>
            </tbody>
        </table>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
        <script>
            $("#button01").click(function() {
                var lines = $("#textarea01").val().split("\n");
                var member_count = new Object();
                console.log(member_count);
                for(var i = 0;i < lines.length;i++){
                    var columns = lines[i].split(",");
                    //var row = "<tr id='row-" + toString(i) + "'>";
                    $("#table01").append("<tr>");
                    for(var j = 0;j < columns.length;j++){
                        //var element = "<td id='element-" + toString(j) + "'>";
                        $("#table01 tr:last-child").append("<td>");
                        if(j===2){
                            var members = columns[j];
                            members = members.replace("a", "");
                            members = members.replace("b", "");
                            $("#table01 tr:last-child td:last-child").append(members);
                            members = members.split("、");
                            console.log(members);
                            for(var k = 0;k < members.length;k++){
                                if(members[k] in member_count){
                                    member_count[members[k]]++;
                                }
                                else{
                                    member_count[members[k]] = 1;
                                }
                            }
                            //$("#table01 tr:last-child td:last-child").append("<br>" + members.length);

                        }
                        else{
                            $("#table01 tr:last-child td:last-child").append(columns[j]);
                        }
                        //$("#table01").append("</td>");
                    }
                    //$("#table01").append("</tr>");
                    //$("#result").append("<br>");
                    //code here using lines[i] which will give you each line
                }
                //var obj = JSON.parse(member_count);
                console.log(member_count);
                //var a = JSON.stringify(member_count);
                var sortable = [];
                for (var v in member_count)
                      sortable.push([v, member_count[v]]);
                sortable.sort(function(a, b) {return a[1] - b[1]});
                sortable.reverse();
                for(eachone in sortable){
                    //console.log(eachone + " : " + sortable[eachone]);
                }
                for(var kk = 0; kk < lines.length; kk++){
                    var digi = kk + 2;
                    var tr = "#table01 tr:nth-child(" + digi + ")";
                    var td = "<td id='td-" + digi + "'>";
                    $(tr).append(td);
                }
                for(var kk = 0; kk < lines.length; kk++){
                    var digi = kk + 2;
                    var td = "#td-" + digi;
                    $(td).append(1);
                }
            });
        </script>
    </body>
</html>
